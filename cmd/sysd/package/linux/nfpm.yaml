# yaml-language-server: $schema=https://nfpm.goreleaser.com/static/schema.json
name: "authentik-sysd"
arch: "${ARCH}"
platform: "linux"
version: "${VERSION}"
description: |
  authentik System Agent
vendor: "Authentik Security Inc."
homepage: "https://goauthentik.io"
maintainer: "Authentik Security Inc."
license: "MIT"
scripts:
  postinstall: ./package/linux/postinst.sh
contents:
  - src: ../../bin/sysd/ak-sysd
    dst: /usr/bin/ak-sysd
  - src: ./package/linux/usr/lib/systemd/system/ak-sysd.service
    dst: /usr/lib/systemd/system/ak-sysd.service
  - src: ./package/linux/config.json
    dst: /etc/authentik/config.json
    type: config
  - src: ../../bin/sysd/completions/sysd.bash
    dst: /etc/bash_completion.d/ak-sysd
  - dst: /etc/authentik/domains
    type: dir
  - dst: /var/lib/authentik
    type: dir
  - src: ../../bin/browser_support/ak-browser-support
    dst: /usr/bin/ak-browser-support
  - src: ./package/linux/browser-host-chrome.json
    dst: /etc/opt/chrome/native-messaging-hosts/io.goauthentik.platform.json
  - src: ./package/linux/browser-host-chrome.json
    dst: /etc/chromium/native-messaging-hosts/io.goauthentik.platform.json
  - src: ./package/linux/browser-host-chrome.json
    dst: /etc/opt/edge/native-messaging-hosts/io.goauthentik.platform.json
  - src: ./package/linux/browser-host-firefox.json
    dst: /usr/lib/mozilla/native-messaging-hosts/io.goauthentik.platform.json
