# yaml-language-server: $schema=https://nfpm.goreleaser.com/static/schema.json
name: "authentik-agent"
arch: "${ARCH}"
platform: "linux"
version: "${VERSION}"
description: |
  authentik Agent
vendor: "Authentik Security Inc."
homepage: "https://goauthentik.io"
maintainer: "Authentik Security Inc."
license: "MIT"
contents:
  - src: ../../bin/agent_local/ak-agent
    dst: /usr/bin/ak-agent
  - src: ./package/linux/etc/systemd/user/ak-agent.service
    dst: /etc/systemd/user/ak-agent.service
  - src: ./package/linux/usr/share/polkit-1/actions/io.goauthentik.platform.policy
    dst: /usr/share/polkit-1/actions/io.goauthentik.platform.policy
overrides:
  deb:
    scripts:
      postinstall: ./package/linux/_deb/postinst.sh
  rpm:
    scripts:
      postinstall: ./package/linux/_rpm/post.sh
